(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{9998:function(e,t,r){Promise.resolve().then(r.bind(r,6900))},6900:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var a=r(7573),s=r(7653),l=r(6022);function n(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[i,u]=(0,s.useState)(null),[d,h]=(0,s.useState)("up"),[m,x]=(0,s.useState)(""),p=async e=>{c(!0),u(null);try{let a=await fetch("/api/metrics?query=".concat(encodeURIComponent(e)));if(a.ok){var r;let s=await a.json();if("success"===s.status&&(null===(r=s.data)||void 0===r?void 0:r.result)){n(s.data.result);let r=s.data.result.map(t=>{let r=parseFloat(t.value[1]);return{name:t.metric.__name__||t.metric.job||e,value:r,unit:e.includes("bytes")?"bytes":e.includes("seconds")?"s":"",status:r>.8?"critical":r>.5?"warning":"good"}});t(r)}}else throw Error("Failed to fetch metrics")}catch(e){u(e instanceof Error?e.message:"Failed to fetch metrics"),t([{name:"Swarm Success Rate",value:98.5,unit:"%",status:"good"},{name:"Average Latency",value:142,unit:"ms",status:"good"},{name:"Active Swarms",value:3,unit:"",status:"good"},{name:"Memory Usage",value:72,unit:"%",status:"warning"},{name:"CPU Usage",value:45,unit:"%",status:"good"},{name:"Error Rate",value:.2,unit:"%",status:"good"}])}finally{c(!1)}};(0,s.useEffect)(()=>{p(d)},[d]);let b=e=>{switch(e){case"good":return"text-green-400 border-green-500/30";case"warning":return"text-yellow-400 border-yellow-500/30";case"critical":return"text-red-400 border-red-500/30";default:return"text-gray-400 border-gray-500/30"}},g=(e,t)=>"%"===t?"".concat(e.toFixed(1),"%"):"ms"===t?"".concat(Math.round(e),"ms"):"s"===t?"".concat(e.toFixed(2),"s"):"bytes"===t?e>1e9?"".concat((e/1e9).toFixed(2)," GB"):e>1e6?"".concat((e/1e6).toFixed(2)," MB"):e>1e3?"".concat((e/1e3).toFixed(2)," KB"):"".concat(e," B"):e.toFixed(2);return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Metrics Dashboard"}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:"System performance and monitoring"})]}),(0,a.jsx)("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 border border-purple-500/20 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Predefined Queries"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"Service Health",query:"up"},{label:"Request Rate",query:"rate(http_requests_total[5m])"},{label:"Error Rate",query:'rate(http_requests_total{status=~"5.."}[5m])'},{label:"Response Time",query:"histogram_quantile(0.95, http_request_duration_seconds_bucket)"},{label:"Memory Usage",query:"process_resident_memory_bytes"},{label:"CPU Usage",query:"rate(process_cpu_seconds_total[5m])"}].map(e=>(0,a.jsx)("button",{onClick:()=>h(e.query),className:"px-3 py-2 rounded-lg text-sm transition ".concat(d===e.query?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.label},e.query))})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Custom Query"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Enter PromQL query...",className:"flex-1 px-4 py-2 bg-gray-800 border border-purple-500/20 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"}),(0,a.jsx)("button",{onClick:()=>m&&h(m),disabled:!m,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition",children:"Run"})]})]})]})}),o?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"text-2xl text-purple-400 animate-pulse",children:"Loading metrics..."})}):i?(0,a.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-6 mb-8",children:[(0,a.jsxs)("div",{className:"text-yellow-400",children:["Note: ",i]}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mt-2",children:"Showing fallback metrics"})]}):null,(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 border ".concat(b(e.status)),children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:e.name}),(0,a.jsx)("div",{className:"text-3xl font-bold text-white mb-4",children:g(e.value,e.unit)}),"%"===e.unit&&(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all ".concat("good"===e.status?"bg-green-500":"warning"===e.status?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(e.value,100),"%")}})})]},t))}),r.length>0&&(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 border border-purple-500/20",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Raw Query Results"}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-purple-900/20",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-sm text-gray-300",children:"Metric"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-sm text-gray-300",children:"Labels"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-sm text-gray-300",children:"Value"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-sm text-gray-300",children:"Timestamp"})]})}),(0,a.jsx)("tbody",{children:r.slice(0,10).map((e,t)=>(0,a.jsxs)("tr",{className:"border-t border-purple-500/10",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:e.metric.__name__||"unnamed"}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-gray-400",children:Object.entries(e.metric).filter(e=>{let[t]=e;return"__name__"!==t}).map(e=>{let[t,r]=e;return"".concat(t,'="').concat(r,'"')}).join(", ")}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-cyan-400",children:parseFloat(e.value[1]).toFixed(4)}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(1e3*e.value[0]).toLocaleTimeString()})]},t))})]}),r.length>10&&(0,a.jsxs)("div",{className:"text-center py-2 text-sm text-gray-400",children:["Showing 10 of ",r.length," results"]})]})]}),l.v.monitoring.grafanaUrl&&(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 border border-purple-500/20 mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Grafana Dashboard"}),(0,a.jsx)("div",{className:"aspect-video bg-gray-800 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Grafana Dashboard"}),(0,a.jsx)("a",{href:l.v.monitoring.grafanaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"Open in Grafana"})]})})]})]})})}},6022:function(e,t,r){"use strict";r.d(t,{v:function(){return s}});var a=r(3875);let s={api:{dashboard:a.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",swarmOrchestrator:a.env.NEXT_PUBLIC_SWARM_URL||"http://localhost:8100",mcpContext:a.env.NEXT_PUBLIC_MCP_CONTEXT_URL||"http://localhost:8081",mcpResearch:a.env.NEXT_PUBLIC_MCP_RESEARCH_URL||"http://localhost:8085",vectorSearch:a.env.NEXT_PUBLIC_VECTOR_SEARCH_URL||"http://localhost:8086"},ws:{swarm:a.env.NEXT_PUBLIC_SWARM_WS_URL||"ws://localhost:8100",debate:a.env.NEXT_PUBLIC_DEBATE_WS_URL||"ws://localhost:8100"},monitoring:{prometheusUrl:a.env.NEXT_PUBLIC_PROM_URL||"http://localhost:9090",grafanaUrl:a.env.NEXT_PUBLIC_GRAFANA_URL||"http://localhost:3001",grafanaDashboardId:a.env.NEXT_PUBLIC_GRAFANA_DASHBOARD_ID||"sophia-metrics"},healthTargets:[{name:"Swarm Orchestrator",url:"http://localhost:8100/health"},{name:"MCP Context",url:"http://localhost:8081/health"},{name:"MCP Research",url:"http://localhost:8085/health"},{name:"Vector Search",url:"http://localhost:8086/health"}],portkey:{enabled:!!a.env.NEXT_PUBLIC_PORTKEY_API_KEY,virtualKeysConfigured:["OPENAI","ANTHROPIC","DEEPSEEK","QWEN","GROK","GROQ","PERPLEXITY","MISTRAL","HUGGINGFACE"].filter(e=>!!a.env["PORTKEY_VK_".concat(e)])},features:{enableWebSocket:!0,enableDebateMode:!0,enableMetrics:!0,enableAgentFactory:!0,enableSwarmMonitor:!0,autoSubscribeToSwarms:!0},ui:{maxActivityFeedItems:100,maxDebateOutcomes:10,defaultChatMessages:50,refreshInterval:5e3}}},3875:function(e,t,r){"use strict";var a,s;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(3928)},3928:function(e){!function(){var t={229:function(e){var t,r,a,s=e.exports={};function l(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var c=[],i=!1,u=-1;function d(){i&&a&&(i=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!i){var e=o(d);i=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,i=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function x(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||i||o(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.prependListener=x,s.prependOnceListener=x,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function a(e){var s=r[e];if(void 0!==s)return s.exports;var l=r[e]={exports:{}},n=!0;try{t[e](l,l.exports,a),n=!1}finally{n&&delete r[e]}return l.exports}a.ab="//";var s=a(229);e.exports=s}()}},function(e){e.O(0,[293,286,744],function(){return e(e.s=9998)}),_N_E=e.O()}]);