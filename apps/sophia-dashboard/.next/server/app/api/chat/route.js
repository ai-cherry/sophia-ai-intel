"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_lynnmusil_sophia_ai_intel_1_apps_sophia_dashboard_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/lynnmusil/sophia-ai-intel-1/apps/sophia-dashboard/src/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_lynnmusil_sophia_ai_intel_1_apps_sophia_dashboard_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGY2hhdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hhdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNoYXQlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZseW5ubXVzaWwlMkZzb3BoaWEtYWktaW50ZWwtMSUyRmFwcHMlMkZzb3BoaWEtZGFzaGJvYXJkJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmx5bm5tdXNpbCUyRnNvcGhpYS1haS1pbnRlbC0xJTJGYXBwcyUyRnNvcGhpYS1kYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrQztBQUMvRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NvcGhpYS1kYXNoYm9hcmQvP2YwOTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2x5bm5tdXNpbC9zb3BoaWEtYWktaW50ZWwtMS9hcHBzL3NvcGhpYS1kYXNoYm9hcmQvc3JjL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2x5bm5tdXNpbC9zb3BoaWEtYWktaW50ZWwtMS9hcHBzL3NvcGhpYS1kYXNoYm9hcmQvc3JjL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n\nasync function POST(request) {\n    try {\n        const { message, context, sessionId, activeTab, enableWebSocket } = await request.json();\n        // Enhanced context for Sophia Brain\n        const enhancedContext = {\n            ...context,\n            dashboard: {\n                activeTab: activeTab || \"chat\",\n                sessionId: sessionId || `session_${Date.now()}`,\n                timestamp: new Date().toISOString()\n            },\n            services: {\n                unified_swarm: \"http://localhost:8100\",\n                mcp_context: \"http://localhost:8081\",\n                github: \"http://localhost:8082\"\n            }\n        };\n        // SOPHIA SUPREME - The One True Orchestrator\n        try {\n            const sophiaSupremeResponse = await fetch(\"http://localhost:8300/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    message: message,\n                    context: enhancedContext\n                })\n            });\n            if (sophiaSupremeResponse.ok) {\n                const data = await sophiaSupremeResponse.json();\n                // Return structured response for new dashboard\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: {\n                        id: `msg-${Date.now()}`,\n                        role: \"assistant\",\n                        content: data.response || data.message || \"Processing your request...\",\n                        metadata: {\n                            actions: data.actions_taken || [],\n                            services: data.services_used || [],\n                            research: data.research_results || [],\n                            code: data.code_artifacts || [],\n                            plans: data.planning_output || null,\n                            agents: data.agent_activities || [],\n                            github_pr: data.github_pr || null\n                        },\n                        timestamp: new Date().toISOString()\n                    },\n                    orchestrator: \"Sophia Supreme\",\n                    sessionId: enhancedContext.dashboard.sessionId\n                });\n            }\n        } catch (error) {\n            console.log(\"Connecting to Sophia Supreme...\");\n        }\n        // Fallback to Direct Swarm API\n        try {\n            const directResponse = await fetch(\"http://localhost:8200/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    message: message,\n                    agent_type: activeTab || \"research\"\n                })\n            });\n            if (directResponse.ok) {\n                const data = await directResponse.json();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: {\n                        id: `msg-${Date.now()}`,\n                        role: \"assistant\",\n                        content: data.response,\n                        metadata: {\n                            actions: [\n                                \"Swarm deployed\"\n                            ],\n                            services: [\n                                \"direct-swarm\"\n                            ],\n                            agents: [\n                                {\n                                    type: data.swarm_type,\n                                    id: data.task_id\n                                }\n                            ]\n                        },\n                        timestamp: new Date().toISOString()\n                    },\n                    orchestrator: \"Direct Swarm\",\n                    sessionId: enhancedContext.dashboard.sessionId\n                });\n            }\n        } catch (error) {\n            console.log(\"Direct swarm not available, trying Sophia Brain...\");\n        }\n        // Try Sophia Brain as fallback\n        try {\n            const sophiaResponse = await fetch(\"http://localhost:8099/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: message\n                        }\n                    ],\n                    context: enhancedContext,\n                    capabilities: [\n                        \"research\",\n                        \"code\",\n                        \"agents\",\n                        \"github\",\n                        \"analysis\"\n                    ]\n                })\n            });\n            if (sophiaResponse.ok) {\n                const data = await sophiaResponse.json();\n                // Process Sophia's response with full context awareness\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: {\n                        id: `msg-${Date.now()}`,\n                        role: \"assistant\",\n                        content: data.response || data.message || \"Processing your request with full neural context...\",\n                        metadata: {\n                            actions: data.actions_taken || [],\n                            services: data.services_used || []\n                        },\n                        timestamp: new Date().toISOString()\n                    },\n                    orchestrator: \"Sophia Brain\",\n                    sessionId: enhancedContext.dashboard.sessionId\n                });\n            }\n        } catch (error) {\n            console.log(\"Sophia Brain initializing, trying fallback...\");\n        }\n        // Fallback to chat coordinator\n        try {\n            const coordinatorResponse = await fetch(\"http://localhost:8095/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: message\n                        }\n                    ]\n                })\n            });\n            if (coordinatorResponse.ok) {\n                const data = await coordinatorResponse.json();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.response || \"Let me process that for you.\",\n                    timestamp: new Date().toISOString(),\n                    service: \"chat-coordinator\"\n                });\n            }\n        } catch (error) {\n            console.log(\"Chat coordinator not available\");\n        }\n        // If no services available, provide intelligent fallback responses\n        const fallbackResponses = {\n            \"hello\": \"Hello! I'm Sophia AI. How can I assist you today?\",\n            \"help\": \"I can help you with:\\n• Research and analysis\\n• Code generation and debugging\\n• Agent deployment for autonomous tasks\\n• Deep web research\\n• GitHub integration\",\n            \"agents\": \"You can deploy various AI agents:\\n• Research Agent - for autonomous web research\\n• Code Agent - for code generation and debugging\\n• Analysis Agent - for data analysis\",\n            \"research\": \"I can conduct comprehensive research with source citations. Just tell me what topic you'd like me to investigate.\",\n            \"code\": \"I can help generate, debug, and optimize code in any language. What would you like to build?\",\n            \"default\": `I received your message: \"${message}\". While my neural networks are initializing, I can still help you with basic queries. Try asking about agents, research, or code generation.`\n        };\n        const lowercaseMessage = message.toLowerCase();\n        let response = fallbackResponses.default;\n        for (const [key, value] of Object.entries(fallbackResponses)){\n            if (lowercaseMessage.includes(key)) {\n                response = value;\n                break;\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: {\n                id: `msg-${Date.now()}`,\n                role: \"assistant\",\n                content: response,\n                metadata: {},\n                timestamp: new Date().toISOString()\n            },\n            orchestrator: \"Fallback\",\n            sessionId: sessionId || `session_${Date.now()}`\n        });\n    } catch (error) {\n        console.error(\"Chat API Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process message\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUNUQyxVQUFVLENBQUM7Z0JBQ1huQixXQUFXLElBQUlGLE9BQU9HLFdBQVc7WUFDbkM7WUFDQStCLGNBQWM7WUFDZHhDLFdBQVdBLGFBQWEsQ0FBQyxRQUFRLEVBQUVNLEtBQUtDLEdBQUcsR0FBRyxDQUFDO1FBQ2pEO0lBRUYsRUFBRSxPQUFPa0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsbUJBQW1CQTtRQUNqQyxPQUFPOUMscURBQVlBLENBQUNRLElBQUksQ0FDdEI7WUFBRXNDLE9BQU87UUFBNEIsR0FDckM7WUFBRXNCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29waGlhLWRhc2hib2FyZC8uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHM/NDZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIGNvbnRleHQsIHNlc3Npb25JZCwgYWN0aXZlVGFiLCBlbmFibGVXZWJTb2NrZXQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gRW5oYW5jZWQgY29udGV4dCBmb3IgU29waGlhIEJyYWluXG4gICAgY29uc3QgZW5oYW5jZWRDb250ZXh0ID0ge1xuICAgICAgLi4uY29udGV4dCxcbiAgICAgIGRhc2hib2FyZDoge1xuICAgICAgICBhY3RpdmVUYWI6IGFjdGl2ZVRhYiB8fCAnY2hhdCcsXG4gICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkIHx8IGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSxcbiAgICAgIHNlcnZpY2VzOiB7XG4gICAgICAgIHVuaWZpZWRfc3dhcm06ICdodHRwOi8vbG9jYWxob3N0OjgxMDAnLFxuICAgICAgICBtY3BfY29udGV4dDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MScsXG4gICAgICAgIGdpdGh1YjogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MidcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gU09QSElBIFNVUFJFTUUgLSBUaGUgT25lIFRydWUgT3JjaGVzdHJhdG9yXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNvcGhpYVN1cHJlbWVSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgzMDAvY2hhdCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICBjb250ZXh0OiBlbmhhbmNlZENvbnRleHRcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc29waGlhU3VwcmVtZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzb3BoaWFTdXByZW1lUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmV0dXJuIHN0cnVjdHVyZWQgcmVzcG9uc2UgZm9yIG5ldyBkYXNoYm9hcmRcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICBpZDogYG1zZy0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgY29udGVudDogZGF0YS5yZXNwb25zZSB8fCBkYXRhLm1lc3NhZ2UgfHwgJ1Byb2Nlc3NpbmcgeW91ciByZXF1ZXN0Li4uJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IGRhdGEuYWN0aW9uc190YWtlbiB8fCBbXSxcbiAgICAgICAgICAgICAgc2VydmljZXM6IGRhdGEuc2VydmljZXNfdXNlZCB8fCBbXSxcbiAgICAgICAgICAgICAgcmVzZWFyY2g6IGRhdGEucmVzZWFyY2hfcmVzdWx0cyB8fCBbXSxcbiAgICAgICAgICAgICAgY29kZTogZGF0YS5jb2RlX2FydGlmYWN0cyB8fCBbXSxcbiAgICAgICAgICAgICAgcGxhbnM6IGRhdGEucGxhbm5pbmdfb3V0cHV0IHx8IG51bGwsXG4gICAgICAgICAgICAgIGFnZW50czogZGF0YS5hZ2VudF9hY3Rpdml0aWVzIHx8IFtdLFxuICAgICAgICAgICAgICBnaXRodWJfcHI6IGRhdGEuZ2l0aHViX3ByIHx8IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JjaGVzdHJhdG9yOiAnU29waGlhIFN1cHJlbWUnLFxuICAgICAgICAgIHNlc3Npb25JZDogZW5oYW5jZWRDb250ZXh0LmRhc2hib2FyZC5zZXNzaW9uSWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW5nIHRvIFNvcGhpYSBTdXByZW1lLi4uJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIERpcmVjdCBTd2FybSBBUElcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGlyZWN0UmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MjAwL2NoYXQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgYWdlbnRfdHlwZTogYWN0aXZlVGFiIHx8ICdyZXNlYXJjaCdcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGlyZWN0UmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGRpcmVjdFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEucmVzcG9uc2UsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBhY3Rpb25zOiBbJ1N3YXJtIGRlcGxveWVkJ10sXG4gICAgICAgICAgICAgIHNlcnZpY2VzOiBbJ2RpcmVjdC1zd2FybSddLFxuICAgICAgICAgICAgICBhZ2VudHM6IFt7IHR5cGU6IGRhdGEuc3dhcm1fdHlwZSwgaWQ6IGRhdGEudGFza19pZCB9XVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmNoZXN0cmF0b3I6ICdEaXJlY3QgU3dhcm0nLFxuICAgICAgICAgIHNlc3Npb25JZDogZW5oYW5jZWRDb250ZXh0LmRhc2hib2FyZC5zZXNzaW9uSWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEaXJlY3Qgc3dhcm0gbm90IGF2YWlsYWJsZSwgdHJ5aW5nIFNvcGhpYSBCcmFpbi4uLicpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgU29waGlhIEJyYWluIGFzIGZhbGxiYWNrXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNvcGhpYVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5OS9jaGF0Jywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBtZXNzYWdlIH1dLFxuICAgICAgICAgIGNvbnRleHQ6IGVuaGFuY2VkQ29udGV4dCxcbiAgICAgICAgICBjYXBhYmlsaXRpZXM6IFsncmVzZWFyY2gnLCAnY29kZScsICdhZ2VudHMnLCAnZ2l0aHViJywgJ2FuYWx5c2lzJ11cbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc29waGlhUmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNvcGhpYVJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgU29waGlhJ3MgcmVzcG9uc2Ugd2l0aCBmdWxsIGNvbnRleHQgYXdhcmVuZXNzXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEucmVzcG9uc2UgfHwgZGF0YS5tZXNzYWdlIHx8ICdQcm9jZXNzaW5nIHlvdXIgcmVxdWVzdCB3aXRoIGZ1bGwgbmV1cmFsIGNvbnRleHQuLi4nLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgYWN0aW9uczogZGF0YS5hY3Rpb25zX3Rha2VuIHx8IFtdLFxuICAgICAgICAgICAgICBzZXJ2aWNlczogZGF0YS5zZXJ2aWNlc191c2VkIHx8IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yY2hlc3RyYXRvcjogJ1NvcGhpYSBCcmFpbicsXG4gICAgICAgICAgc2Vzc2lvbklkOiBlbmhhbmNlZENvbnRleHQuZGFzaGJvYXJkLnNlc3Npb25JZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ1NvcGhpYSBCcmFpbiBpbml0aWFsaXppbmcsIHRyeWluZyBmYWxsYmFjay4uLicpO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIGNoYXQgY29vcmRpbmF0b3JcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29vcmRpbmF0b3JSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwOTUvY2hhdCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogbWVzc2FnZSB9XVxuICAgICAgICB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChjb29yZGluYXRvclJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjb29yZGluYXRvclJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICByZXNwb25zZTogZGF0YS5yZXNwb25zZSB8fCAnTGV0IG1lIHByb2Nlc3MgdGhhdCBmb3IgeW91LicsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc2VydmljZTogJ2NoYXQtY29vcmRpbmF0b3InXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2hhdCBjb29yZGluYXRvciBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gc2VydmljZXMgYXZhaWxhYmxlLCBwcm92aWRlIGludGVsbGlnZW50IGZhbGxiYWNrIHJlc3BvbnNlc1xuICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2hlbGxvJzogJ0hlbGxvISBJXFwnbSBTb3BoaWEgQUkuIEhvdyBjYW4gSSBhc3Npc3QgeW91IHRvZGF5PycsXG4gICAgICAnaGVscCc6ICdJIGNhbiBoZWxwIHlvdSB3aXRoOlxcbuKAoiBSZXNlYXJjaCBhbmQgYW5hbHlzaXNcXG7igKIgQ29kZSBnZW5lcmF0aW9uIGFuZCBkZWJ1Z2dpbmdcXG7igKIgQWdlbnQgZGVwbG95bWVudCBmb3IgYXV0b25vbW91cyB0YXNrc1xcbuKAoiBEZWVwIHdlYiByZXNlYXJjaFxcbuKAoiBHaXRIdWIgaW50ZWdyYXRpb24nLFxuICAgICAgJ2FnZW50cyc6ICdZb3UgY2FuIGRlcGxveSB2YXJpb3VzIEFJIGFnZW50czpcXG7igKIgUmVzZWFyY2ggQWdlbnQgLSBmb3IgYXV0b25vbW91cyB3ZWIgcmVzZWFyY2hcXG7igKIgQ29kZSBBZ2VudCAtIGZvciBjb2RlIGdlbmVyYXRpb24gYW5kIGRlYnVnZ2luZ1xcbuKAoiBBbmFseXNpcyBBZ2VudCAtIGZvciBkYXRhIGFuYWx5c2lzJyxcbiAgICAgICdyZXNlYXJjaCc6ICdJIGNhbiBjb25kdWN0IGNvbXByZWhlbnNpdmUgcmVzZWFyY2ggd2l0aCBzb3VyY2UgY2l0YXRpb25zLiBKdXN0IHRlbGwgbWUgd2hhdCB0b3BpYyB5b3VcXCdkIGxpa2UgbWUgdG8gaW52ZXN0aWdhdGUuJyxcbiAgICAgICdjb2RlJzogJ0kgY2FuIGhlbHAgZ2VuZXJhdGUsIGRlYnVnLCBhbmQgb3B0aW1pemUgY29kZSBpbiBhbnkgbGFuZ3VhZ2UuIFdoYXQgd291bGQgeW91IGxpa2UgdG8gYnVpbGQ/JyxcbiAgICAgICdkZWZhdWx0JzogYEkgcmVjZWl2ZWQgeW91ciBtZXNzYWdlOiBcIiR7bWVzc2FnZX1cIi4gV2hpbGUgbXkgbmV1cmFsIG5ldHdvcmtzIGFyZSBpbml0aWFsaXppbmcsIEkgY2FuIHN0aWxsIGhlbHAgeW91IHdpdGggYmFzaWMgcXVlcmllcy4gVHJ5IGFza2luZyBhYm91dCBhZ2VudHMsIHJlc2VhcmNoLCBvciBjb2RlIGdlbmVyYXRpb24uYFxuICAgIH07XG5cbiAgICBjb25zdCBsb3dlcmNhc2VNZXNzYWdlID0gbWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCByZXNwb25zZSA9IGZhbGxiYWNrUmVzcG9uc2VzLmRlZmF1bHQ7XG4gICAgXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmFsbGJhY2tSZXNwb25zZXMpKSB7XG4gICAgICBpZiAobG93ZXJjYXNlTWVzc2FnZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIHJlc3BvbnNlID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiB7XG4gICAgICAgIGlkOiBgbXNnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogcmVzcG9uc2UsXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0sXG4gICAgICBvcmNoZXN0cmF0b3I6ICdGYWxsYmFjaycsXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCB8fCBgc2Vzc2lvbl8ke0RhdGUubm93KCl9YFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2hhdCBBUEkgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBtZXNzYWdlJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJQT1NUIiwicmVxdWVzdCIsIm1lc3NhZ2UiLCJjb250ZXh0Iiwic2Vzc2lvbklkIiwiYWN0aXZlVGFiIiwiZW5hYmxlV2ViU29ja2V0IiwianNvbiIsImVuaGFuY2VkQ29udGV4dCIsImRhc2hib2FyZCIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInNlcnZpY2VzIiwidW5pZmllZF9zd2FybSIsIm1jcF9jb250ZXh0IiwiZ2l0aHViIiwic29waGlhU3VwcmVtZVJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImRhdGEiLCJpZCIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2UiLCJtZXRhZGF0YSIsImFjdGlvbnMiLCJhY3Rpb25zX3Rha2VuIiwic2VydmljZXNfdXNlZCIsInJlc2VhcmNoIiwicmVzZWFyY2hfcmVzdWx0cyIsImNvZGUiLCJjb2RlX2FydGlmYWN0cyIsInBsYW5zIiwicGxhbm5pbmdfb3V0cHV0IiwiYWdlbnRzIiwiYWdlbnRfYWN0aXZpdGllcyIsImdpdGh1Yl9wciIsIm9yY2hlc3RyYXRvciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImRpcmVjdFJlc3BvbnNlIiwiYWdlbnRfdHlwZSIsInR5cGUiLCJzd2FybV90eXBlIiwidGFza19pZCIsInNvcGhpYVJlc3BvbnNlIiwibWVzc2FnZXMiLCJjYXBhYmlsaXRpZXMiLCJjb29yZGluYXRvclJlc3BvbnNlIiwic2VydmljZSIsImZhbGxiYWNrUmVzcG9uc2VzIiwibG93ZXJjYXNlTWVzc2FnZSIsInRvTG93ZXJDYXNlIiwiZGVmYXVsdCIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImluY2x1ZGVzIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flynnmusil%2Fsophia-ai-intel-1%2Fapps%2Fsophia-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();